"use strict";var fileSystem=require("fs"),path=require("path"),fetch=require("node-fetch");function validUrl(e){return e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)}function validTypeImage(e){return/\.(jpe?g|png)$/i.test(e)}function base64ToNode(e){return e.toString("base64")}function readFileAndConvert(e){return fileSystem.statSync(e).isFile()?base64ToNode(fileSystem.readFileSync(path.resolve(e)).toString("base64")):null}function isImage(e){return validTypeImage(e)?Promise.resolve(readFileAndConvert(e)):Promise.reject("[*] An error occured: Invalid image [validTypeImage === false]")}function imageToBase64(e){return validUrl(e)?fetch(e).then(function(e){return e.buffer()}).then(base64ToNode):isImage(e)}module.exports=imageToBase64;